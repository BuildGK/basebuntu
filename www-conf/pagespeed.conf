# Google Pagespeed

pagespeed on;

# Needs to exist and be writable by nginx.  Use tmpfs for best performance.
pagespeed FileCachePath /var/ngx_pagespeed_cache;

# Ensure requests for pagespeed optimized resources go to the pagespeed handler
# and no extraneous headers get set.
location ~ "\.pagespeed\.([a-z]\.)?[a-z]{2}\.[^.]{10}\.[^.]+" {
  add_header "" "";
}
location ~ "^/pagespeed_static/" { }
location ~ "^/ngx_pagespeed_beacon$" { }

# Filters
pagespeed EnableFilters insert_image_dimensions,insert_dns_prefetch,collapse_whitespace,combine_css,combine_heads,combine_javascript,extend_cache,fallback_rewrite_css_urls,remove_comments,rewrite_css,rewrite_images,rewrite_javascript;

# Header
pagespeed XHeaderValue "Powered By ngx_pagespeed";
